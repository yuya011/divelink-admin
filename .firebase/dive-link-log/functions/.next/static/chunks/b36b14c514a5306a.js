(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12425,(t,e,o)=>{e.exports=t.r(639)},2890,t=>{"use strict";var e=t.i(45908),o=t.i(25629),n=t.i(12425);let r=(0,o.createContext)(null);function i({children:t}){let[i,a]=(0,o.useState)(null),[u,l]=(0,o.useState)(!0),s=(0,n.useRouter)();async function c(){try{let t=await fetch("/api/auth/me");if(t.ok){let e=await t.json();a(e.admin)}else a(null)}catch{a(null)}finally{l(!1)}}async function h(t,e){l(!0);try{let o=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})});if(!o.ok){let t=await o.json();throw Error(t.message||"ログインに失敗しました")}let n=await o.json();a(n.admin),s.push("/")}finally{l(!1)}}async function f(){try{await fetch("/api/auth/logout",{method:"POST"}),a(null),s.push("/login")}catch(t){console.error("Logout error:",t)}}return(0,o.useEffect)(()=>{c()},[]),(0,e.jsx)(r.Provider,{value:{user:i,loading:u,login:h,logout:f},children:t})}function a(){let t=(0,o.useContext)(r);if(!t)throw Error("useAuth must be used within an AuthProvider");return t}t.s(["AuthProvider",()=>i,"useAuth",()=>a])}]);